(()=>{"use strict";var e={d:(t,i)=>{for(var a in i)e.o(i,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:i[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>i}),H5P.SlideDeck=function(e,t){function i(e,i,a){t.call(this),this.params=e||{},this.contentId=i,this.contentData=a,this.currentSlide=0,this.userHasInteracted=!1,this.audioInstances={},this.isChangingSlide=!1,this.pdfCache=new Map,this.pdfLoadingPromises=new Map,this.params.slides||(this.params.slides=[])}return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype.createStartModal=function(){var e=this,t=document.createElement("div");t.className="h5p-slidedeck-start-modal",t.style.cssText="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; z-index: 1000;";var i=document.createElement("div");i.style.cssText="background: white; padding: 40px; border-radius: 8px; text-align: center; max-width: 500px;";var a=document.createElement("h2");a.textContent="Welcome!",a.style.cssText="margin: 0 0 20px 0; color: #333;";var n=document.createElement("p");n.textContent="Click the button below to start.",n.style.cssText="margin: 0 0 30px 0; color: #666;";var s=document.createElement("button");return s.textContent="Start",s.style.cssText="background: #1a73e8; color: white; border: none; padding: 12px 24px; font-size: 16px; border-radius: 4px; cursor: pointer;",s.addEventListener("click",(function(){e.userHasInteracted=!0,t.remove(),e.startPresentation()})),i.appendChild(a),i.appendChild(n),i.appendChild(s),t.appendChild(i),t},i.prototype.startPresentation=function(){var e=this;if(this.shouldAutoplayAfterModal=!0,this.currentAudioElement){var t=this.params.slides[this.currentSlide];t&&t.audioOrVideo&&t.audioOrVideo.params&&t.audioOrVideo.params.autoplay&&this.currentAudioElement.play().then((function(){e.shouldAutoplayAfterModal=!1})).catch((function(e){}))}},i.prototype.attach=function(e){var t=e.get(0);t.classList.add("h5p-slidedeck-main"),t.innerHTML="";var i=!1;this.params.slides.forEach((function(e){e.audioOrVideo&&e.audioOrVideo.params&&e.audioOrVideo.params.autoplay&&(i=!0)})),this.container=document.createElement("div"),this.container.className="h5p-slidedeck",this.sidebar=document.createElement("div"),this.sidebar.className="h5p-slidedeck-sidebar",this.slideArea=document.createElement("div"),this.slideArea.className="h5p-slidedeck-slidearea",this.container.appendChild(this.sidebar),this.container.appendChild(this.slideArea),t.appendChild(this.container),this.renderSidebar(),this.renderSlide();var a=this;setTimeout((function(){a.initResponsiveBehavior()}),0),i&&!this.userHasInteracted&&t.appendChild(this.createStartModal())},i.prototype.updateSidebarHeight=function(){var e=this;requestAnimationFrame((function(){var t=e.container.querySelector(".h5p-slidedeck-nav"),i=e.container.querySelector(".h5p-slidedeck-slidearea"),a=e.container.querySelector(".h5p-slidedeck-slidearea .h5p-slidedeck-content"),n=e.container.querySelector(".h5p-slidedeck-slidearea .h5p-slidedeck-content .h5p-slidedeck-image img")||e.container.querySelector(".h5p-slidedeck-slidearea .h5p-slidedeck-content .h5p-slidedeck-image .h5p-image img")||e.container.querySelector(".h5p-slidedeck-slidearea img");if(t&&i&&a){var s=t.getBoundingClientRect(),r=i.getBoundingClientRect(),d=a.getBoundingClientRect(),c=n?n.getBoundingClientRect():null,o=s.height,l=(r.height,d.height,c&&c.height,420+o);e.sidebar.style.maxHeight=l+"px"}}))},i.prototype.loadPDF=function(e){var t=this;if(this.pdfCache.has(e))return Promise.resolve(this.pdfCache.get(e));if(this.pdfLoadingPromises.has(e))return this.pdfLoadingPromises.get(e);var i=new Promise((function(i,a){getDocument(e).promise.then((function(a){t.pdfCache.set(e,a),t.pdfLoadingPromises.delete(e),i(a)})).catch((function(i){t.pdfLoadingPromises.delete(e),a(i)}))}));return this.pdfLoadingPromises.set(e,i),i},i.prototype.renderSidebar=function(){var e=this;this.sidebar.innerHTML="";var t=this.params.slides[this.currentSlide],i=document.createElement("div");i.className="h5p-slidedeck-title-section";var a=document.createElement("h1");a.className="h5p-slidedeck-title",a.textContent=t.title||"Technical Equipment",i.appendChild(a);var n=document.createElement("h2");n.className="h5p-slidedeck-subtitle",n.textContent=t.subtitle,i.appendChild(n),this.sidebar.appendChild(i);var s=document.createElement("button");s.className="sidebar-toggle",s.innerHTML='<i class="fa fa-chevron-left"></i>',s.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),e.toggleSidebar()})),window.innerWidth<=600?this.container.appendChild(s):this.sidebar.appendChild(s);var r=document.createElement("div");r.className="h5p-slidedeck-tabs";var d=document.createElement("button");d.textContent="Slides",d.className="active";var c=document.createElement("button");c.textContent="Notes",r.appendChild(d),r.appendChild(c),this.sidebar.appendChild(r);var o=document.createElement("div");o.className="h5p-slidedeck-thumbs-container",this.sidebar.appendChild(o);var l=document.createElement("div");l.className="h5p-slidedeck-notes-container",l.style.display="none";var p=document.createElement("div");p.className="h5p-slidedeck-notes",p.innerHTML=t.notes||"",l.appendChild(p),this.sidebar.appendChild(l),this.thumbs=[],this.params.slides.forEach((function(t,i){var a=document.createElement("div");a.className="h5p-slidedeck-thumb",a.setAttribute("data-slide-number",i+1);var n=document.createElement("div");n.className="h5p-slidedeck-thumb-title",n.textContent=t.title||"Slide "+(i+1),a.appendChild(n);var s=document.createElement("div");if(s.className="h5p-slidedeck-thumb-image",a.appendChild(s),o.appendChild(a),e.thumbs.push(a),t.image&&t.image.library)if(0===t.image.library.indexOf("H5P.Image"))H5P.newRunnable(t.image,e.contentId,void 0,!1).attach(H5P.jQuery(s));else if(0===t.image.library.indexOf("H5P.PDFViewer")){var r=JSON.parse(JSON.stringify(t.image));r.params.displayOptions||(r.params.displayOptions={}),r.params.displayOptions.width="80px",r.params.displayOptions.height="60px",H5P.newRunnable(r,e.contentId,void 0,!1).attach(H5P.jQuery(s))}a.addEventListener("click",(function(){e.goToSlide(i)}))})),d.addEventListener("click",(function(){d.classList.add("active"),c.classList.remove("active"),o.style.display="",l.style.display="none"})),c.addEventListener("click",(function(){c.classList.add("active"),d.classList.remove("active"),o.style.display="none",l.style.display=""}))},i.prototype.updateSidebar=function(){this.updateActiveThumbnail();var e=this.sidebar.querySelector(".h5p-slidedeck-notes");e&&this.params.slides[this.currentSlide]&&(e.innerHTML=this.params.slides[this.currentSlide].notes||"");var t=this.sidebar.querySelector(".h5p-slidedeck-title"),i=this.sidebar.querySelector(".h5p-slidedeck-subtitle"),a=this.params.slides[this.currentSlide];t&&a&&(t.textContent=a.title||""),i&&a&&(i.textContent=a.subtitle||"")},i.prototype.renderSlide=function(){var e=this.params.slides[this.currentSlide];if(e){this.stopAllAudio(),this.slideArea.innerHTML="";var t=document.createElement("div");if(t.className="h5p-slidedeck-content",e.image&&e.image.library)if(0===e.image.library.indexOf("H5P.PDFViewer")){var i=document.createElement("div");i.className="h5p-slidedeck-pdf-container",t.appendChild(i),H5P.newRunnable(e.image,this.contentId,void 0,!1).attach(H5P.jQuery(i))}else if(0===e.image.library.indexOf("H5P.Image")){var a=document.createElement("div");a.className="h5p-slidedeck-image",t.appendChild(a),H5P.newRunnable(e.image,this.contentId,void 0,!1).attach(H5P.jQuery(a))}this.slideArea.appendChild(t),this.isChangingSlide=!1,this.setupMedia(e),this.updateSidebar()}},i.prototype.updateActiveThumbnail=function(){this.thumbs&&this.thumbs.forEach((function(e,t){e.classList.toggle("active",t===this.currentSlide)}),this)},i.prototype.toggleSidebar=function(){var e=this.sidebar.classList.contains("expanded"),t=document.querySelector(".sidebar-toggle"),i=window.innerWidth;e?(this.sidebar.classList.remove("expanded"),t&&(t.innerHTML=i<=1e3?'<i class="fa fa-bars"></i>':'<i class="fa fa-chevron-right"></i>')):(this.sidebar.classList.add("expanded"),t&&(t.innerHTML=i<=1e3?'<i class="fa fa-times"></i>':'<i class="fa fa-chevron-left"></i>'));var a=this.params.slides[this.currentSlide];if(a.audioOrVideo&&a.audioOrVideo.library&&a.audioOrVideo.library.includes("H5P.Video")){var n=this.sidebar.querySelector(".h5p-slidedeck-video-top")||this.slideArea.querySelector(".h5p-slidedeck-video-overlay");n&&n.remove(),this.setupMedia(a)}},i.prototype.initResponsiveBehavior=function(){var e=this;function t(){var t=window.innerWidth,i=document.querySelector(".sidebar-toggle");t<=1e3?(e.sidebar.classList.remove("expanded"),i&&i.parentNode!==e.container&&e.container.appendChild(i),i&&(i.innerHTML='<i class="fa fa-bars"></i>')):t>1e3&&(e.sidebar.classList.add("expanded"),i&&i.parentNode!==e.sidebar&&e.sidebar.appendChild(i),i&&(i.innerHTML='<i class="fa fa-chevron-left"></i>'))}function i(t){if(window.innerWidth<=1e3&&e.sidebar.classList.contains("expanded")){var i=document.querySelector(".sidebar-toggle");e.sidebar.contains(t.target)||t.target===i||e.toggleSidebar()}}t(),window.addEventListener("resize",t),document.addEventListener("click",i),this.resizeHandler=t,this.backdropHandler=i},i.prototype.stopAllAudio=function(){if(this.isChangingSlide=!0,this.currentAudioElement){this.currentAudioElement.pause(),this.currentAudioElement.currentTime=0;var e=this.currentAudioElement.cloneNode(!1);this.currentAudioElement.parentNode?.replaceChild(e,this.currentAudioElement),this.currentAudioElement=null}this.currentMediaInstance&&(this.currentMediaInstance.pause&&this.currentMediaInstance.pause(),this.currentMediaInstance.stop&&this.currentMediaInstance.stop(),this.currentMediaInstance=null),this.currentVideoInstance&&(this.currentVideoInstance.pause&&this.currentVideoInstance.pause(),this.currentVideoInstance.stop&&this.currentVideoInstance.stop(),this.currentVideoInstance=null),document.querySelectorAll("audio").forEach((function(e){e.pause(),e.currentTime=0})),document.querySelectorAll(".h5p-audio-minimal-pause").forEach((function(e){e.click()}));var t=document.querySelector(".audio-play-pause");t&&(t.innerHTML='<i class="fa fa-play"></i>')},i.prototype.prevSlide=function(){this.currentSlide>0&&this.currentSlide--},i.prototype.nextSlide=function(){this.currentSlide<this.params.slides.length-1&&this.currentSlide++},i.prototype.goToSlide=function(e){e>=0&&e<this.params.slides.length&&(this.isChangingSlide=!0,this.currentSlide=e,this.renderSlide(),this.preloadNextPDF())},i.prototype.renderPDFInSlide=function(e,t){var i=document.createElement("canvas");i.className="h5p-slidedeck-pdf-canvas",t.appendChild(i),e.getPage(1).then((function(e){var t=e.getViewport({scale:1}),a=i.getContext("2d");i.height=t.height,i.width=t.width,e.render({canvasContext:a,viewport:t})}))},i.prototype.preloadNextPDF=function(){var e=this.currentSlide+1;if(e<this.params.slides.length){var t=this.params.slides[e];if(t.image&&t.image.params&&t.image.params.file){var i=H5P.getPath(t.image.params.file.path,this.contentId);this.loadPDF(i)}}},i.prototype.setupMedia=function(e){var t=this;this.currentMediaInstance=null,this.currentAudioElement=null;var i=e.audioOrVideo&&e.audioOrVideo.library&&0===e.audioOrVideo.library.indexOf("H5P.Video")&&e.audioOrVideo.params&&Array.isArray(e.audioOrVideo.params.sources)&&e.audioOrVideo.params.sources.length>0&&e.audioOrVideo.params.sources.some((function(e){return e&&e.path}));if(i){var a=document.createElement("div");a.className="h5p-slidedeck-video-container";var n=H5P.newRunnable(e.audioOrVideo,this.contentId,void 0,!1),s=this.sidebar.classList.contains("expanded"),r=window.innerWidth;if(s||r>1e3){a.className="h5p-slidedeck-video-top";var d=this.sidebar.querySelector(".h5p-slidedeck-title-section");d?this.sidebar.insertBefore(a,d):this.sidebar.insertBefore(a,this.sidebar.firstChild)}else{a.className="h5p-slidedeck-video-overlay";var c=document.createElement("button");c.className="video-toggle",c.innerHTML='<i class="fa fa-compress"></i>',c.addEventListener("click",(function(e){e.stopPropagation(),a.classList.toggle("collapsed"),c.innerHTML=a.classList.contains("collapsed")?'<i class="fa fa-expand"></i>':'<i class="fa fa-compress"></i>'})),a.appendChild(c),this.slideArea.appendChild(a)}n.attach(H5P.jQuery(a)),this.currentVideoInstance=n,e.audioOrVideo.params&&e.audioOrVideo.params.playback&&e.audioOrVideo.params.playback.autoplay&&this.userHasInteracted&&setTimeout((function(){t.currentVideoInstance&&t.currentVideoInstance.play&&t.currentVideoInstance.play()}),500)}if(!i&&e.audioOrVideo&&e.audioOrVideo.params&&e.audioOrVideo.params.files&&e.audioOrVideo.params.files.length>0){var o=this.sidebar.querySelector(".h5p-slidedeck-video-top")||this.slideArea.querySelector(".h5p-slidedeck-video-overlay");o&&o.remove();var l=document.createElement("audio");l.controls=!1,l.preload="auto";var p=e.audioOrVideo.params.files[0],u=H5P.getPath(p.path,this.contentId);l.src=u;var h=document.createElement("div");h.className="h5p-slidedeck-audio-container",h.style.cssText="position: absolute; left: -9999px; width: 1px; height: 1px; overflow: hidden;",h.appendChild(l),this.slideArea.appendChild(h),this.currentAudioElement=l;var m=this.slideArea.querySelector(".audio-play-pause");function V(){m&&(m.innerHTML=l.paused?'<i class="fa fa-play"></i>':'<i class="fa fa-pause"></i>')}l.addEventListener("play",V),l.addEventListener("pause",V),l.addEventListener("ended",V),m&&m.addEventListener("click",(function(){l.paused?l.play().catch((function(e){})):l.pause()})),V();var v=!1;e.audioOrVideo.params&&e.audioOrVideo.params.autoplay&&(v=!0),this.params.behaviour&&this.params.behaviour.autoPlay&&(v=!0);var f=!1;if(this.shouldAutoplayAfterModal&&v?(f=!0,this.shouldAutoplayAfterModal=!1):this.userHasInteracted&&v&&!this.isChangingSlide&&(f=!0),f){var g=function(){!t.isChangingSlide&&t.currentAudioElement&&t.currentAudioElement.play().catch((function(){}))};l.readyState>=3?setTimeout(g,200):(l.addEventListener("canplaythrough",(function e(){l.removeEventListener("canplaythrough",e),setTimeout(g,200)})),l.addEventListener("loadeddata",(function e(){l.removeEventListener("loadeddata",e),l.readyState>=3&&l.paused&&setTimeout(g,200)})))}}var y=document.createElement("div");y.className="h5p-slidedeck-nav";var b=document.createElement("div");b.className="nav-controls";var E=document.createElement("button");E.innerHTML='<i class="fa fa-chevron-left"></i>',E.className="h5p-slidedeck-prev",E.addEventListener("click",(function(){t.prevSlide(),t.renderSlide()}));var S=document.createElement("button");S.innerHTML='<i class="fa fa-chevron-right"></i>',S.className="h5p-slidedeck-next",S.addEventListener("click",(function(){t.nextSlide(),t.renderSlide()})),b.appendChild(E),b.appendChild(S);var C=document.createElement("div");C.className="left-controls";var k=document.createElement("div");if(k.className="audio-controls",e.audioOrVideo&&!i){(m=document.createElement("button")).innerHTML='<i class="fa fa-play"></i>',m.className="audio-play-pause",m.addEventListener("click",(function(){t.currentAudioElement&&(t.currentAudioElement.paused?t.currentAudioElement.play().catch((function(e){})):t.currentAudioElement.pause())})),k.appendChild(m);var x=document.createElement("div");x.className="speed-controls";var L=document.createElement("button");L.innerHTML="1x",L.className="speed-button";var H=["0.5x","0.75x","1x","1.25x","1.5x","2x"],A=2;L.addEventListener("click",(function(){A=(A+1)%H.length,L.innerHTML=H[A];var e=parseFloat(H[A]);t.currentAudioElement&&(t.currentAudioElement.playbackRate=e)})),x.appendChild(L),k.appendChild(x)}var P=document.createElement("button");P.innerHTML='<i class="fa fa-expand"></i>',P.className="fullscreen-button",P.addEventListener("click",(function(){var e=t.container.closest(".h5p-container")||t.container.parentElement;document.fullscreenElement?(document.exitFullscreen(),e&&e.classList.remove("h5p-fullscreen")):(t.container.requestFullscreen().catch((e=>{})),e&&e.classList.add("h5p-fullscreen"))})),document.addEventListener("fullscreenchange",(function(){P.innerHTML=document.fullscreenElement?'<i class="fa fa-compress"></i>':'<i class="fa fa-expand"></i>';var e=t.container.closest(".h5p-container")||t.container.parentElement;e&&(document.fullscreenElement?e.classList.add("h5p-fullscreen"):e.classList.remove("h5p-fullscreen"))})),C.appendChild(k),C.appendChild(P);var N=document.createElement("div");N.className="right-controls";var O=document.createElement("span");O.className="h5p-slidedeck-count",O.textContent=this.currentSlide+1+" of "+this.params.slides.length,N.appendChild(O),N.appendChild(b),y.appendChild(C),y.appendChild(N),this.container.appendChild(y),this.updateActiveThumbnail()},i}(H5P.jQuery,H5P.EventDispatcher);const i=H5P.SlideDeck;(window.H5P=window.H5P||{}).SlideDeck=t.default})();